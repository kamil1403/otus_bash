<p align="center">
  <img src="https://github.com/kamil1403/otus_bash/blob/main/screenshots/bash-logo-dark.jpg" alt="Banner" width="65%">
</p>

## ![Lesson](https://img.shields.io/badge/Lesson-otus__bash-0A84FF?style=for-the-badge&logo=linux&logoColor=white&labelColor=111827)![Author](https://img.shields.io/badge/Author-Kamil%20Ibragimov-10B981?style=for-the-badge&logo=github&logoColor=white&labelColor=111827)![Date](https://img.shields.io/badge/Date-20.10.2025-F59E0B?style=for-the-badge&logo=calendar&logoColor=white&labelColor=111827)

### üìå –ó–∞–¥–∞–Ω–∏–µ:   
- [ ] –ù–∞–ø–∏—Å–∞—Ç—å —Å–∫—Ä–∏–ø—Ç –¥–ª—è CRON, –∫–æ—Ç–æ—Ä—ã–π —Ä–∞–∑ –≤ —á–∞—Å –±—É–¥–µ—Ç —Ñ–æ—Ä–º–∏—Ä–æ–≤–∞—Ç—å –ø–∏—Å—å–º–æ –∏ –æ—Ç–ø—Ä–∞–≤–ª—è—Ç—å –Ω–∞ –∑–∞–¥–∞–Ω–Ω—É—é –ø–æ—á—Ç—É.
–ù–µ–æ–±—Ö–æ–¥–∏–º–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –≤ –ø–∏—Å—å–º–µ:   
- [ ] –°–ø–∏—Å–æ–∫ –∑–∞–ø—Ä–∞—à–∏–≤–∞–µ–º—ã—Ö URL (—Å –Ω–∞–∏–±–æ–ª—å—à–∏–º –∫–æ–ª-–≤–æ–º –∑–∞–ø—Ä–æ—Å–æ–≤) —Å —É–∫–∞–∑–∞–Ω–∏–µ–º –∫–æ–ª-–≤–∞ –∑–∞–ø—Ä–æ—Å–æ–≤ c –º–æ–º–µ–Ω—Ç–∞ –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ –∑–∞–ø—É—Å–∫–∞ —Å–∫—Ä–∏–ø—Ç–∞;         
- [ ] –û—à–∏–±–∫–∏ –≤–µ–±-—Å–µ—Ä–≤–µ—Ä–∞/–ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è c –º–æ–º–µ–Ω—Ç–∞ –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ –∑–∞–ø—É—Å–∫–∞;   
- [ ] –°–ø–∏—Å–æ–∫ –≤—Å–µ—Ö –∫–æ–¥–æ–≤ HTTP –æ—Ç–≤–µ—Ç–∞ —Å —É–∫–∞–∑–∞–Ω–∏–µ–º –∏—Ö –∫–æ–ª-–≤–∞ —Å –º–æ–º–µ–Ω—Ç–∞ –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ –∑–∞–ø—É—Å–∫–∞ —Å–∫—Ä–∏–ø—Ç–∞;
- [ ] –°–∫—Ä–∏–ø—Ç –¥–æ–ª–∂–µ–Ω –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞—Ç—å –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–π –∑–∞–ø—É—Å–∫ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö –∫–æ–ø–∏–π, –¥–æ –µ–≥–æ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è.        

### ‚úÖ –†–µ–∑—É–ª—å—Ç–∞—Ç:   
- [x] –ü–∏—Å—å–º–æ —Ñ–æ—Ä–º–∏—Ä—É–µ—Ç—Å—è –∏ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—è –Ω–∞ –∑–∞–¥–∞–Ω–Ω—É—é –ø–æ—á—Ç—É, —Å–æ –≤—Å–µ–π –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π –∏–∑ –∑–∞–¥–∞–Ω–∏—è –≤—ã—à–µ. –†–µ–∑—É–ª—å—Ç–∞—Ç —Å–º. –Ω–∞ —Å–∫—Ä–∏–Ω—à–æ—Ç–µ üñºÔ∏è ["watchlog.timer"](https://github.com/kamil1403/otus_systemd/blob/main/screenshots/watchlog.timer.png)     

### üß≠ –û–≥–ª–∞–≤–ª–µ–Ω–∏–µ
- [üß∞ –ö–æ–º–∞–Ω–¥–∞ ‚Ññ1 - "–¢–æ–ø IP –ø–æ –∫–æ–ª–∏—á–µ—Å—Ç–≤—É –∑–∞–ø—Ä–æ—Å–æ–≤"](#one)
- [üß∞ –ö–æ–º–∞–Ω–¥–∞ ‚Ññ2 - "–¢–æ–ø –∑–∞–ø—Ä–∞—à–∏–≤–∞–µ–º—ã—Ö URL"](#two)
- [üß∞ –ö–æ–º–∞–Ω–¥–∞ ‚Ññ3 - "–û—à–∏–±–∫–∏ –≤–µ–±-—Å–µ—Ä–≤–µ—Ä–∞ / –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è (4xx/5xx)"](#three)
- [üß∞ –ö–æ–º–∞–Ω–¥–∞ ‚Ññ4 - "–í—Å–µ –∫–æ–¥—ã HTTP —Å –∏—Ö –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ–º"](#four)
- [üöÄ –ö—Ä–∞—Ç–∫–∏–π –ø–æ—Ä—è–¥–æ–∫ –¥–µ–π—Å—Ç–≤–∏–π (—Å–æ–∑–¥–∞–Ω–∏–µ –∏ –∑–∞–ø—É—Å–∫ —Å–∫—Ä–∏–ø—Ç–∞)](#start)
- [‚è±Ô∏è –î–æ–±–∞–≤–ª–µ–Ω–∏–µ —Å–∫—Ä–∏–ø—Ç–∞ –≤ cron](#cron)
- [üìù –°–æ–¥–µ—Ä–∂–∏–º–æ–µ —Å–∫—Ä–∏–ø—Ç–∞](#script)

---

<a id="one"></a>
## üß∞ –ö–æ–º–∞–Ω–¥–∞ ‚Ññ1 - "–¢–æ–ø IP –ø–æ –∫–æ–ª–∏—á–µ—Å—Ç–≤—É –∑–∞–ø—Ä–æ—Å–æ–≤

```bash
awk '{print $1}' otus.log | sort | uniq -c | sort -nr
```

---

<a id="two"></a>
## üß∞ –ö–æ–º–∞–Ω–¥–∞ ‚Ññ2 ‚Äî ¬´–¢–æ–ø –ø–µ—Ä–≤—ã—Ö —Å–µ–≥–º–µ–Ω—Ç–æ–≤ URL

```bash
awk -F'"' '{print $2}' otus.log | cut -d'/' -f2 | sort | uniq -c | sort -nr | head -n 11
```

---

<a id="three"></a>
## üß∞ –ö–æ–º–∞–Ω–¥–∞ ‚Ññ3 - "–û—à–∏–±–∫–∏ –≤–µ–±-—Å–µ—Ä–≤–µ—Ä–∞ / –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è (4xx/5xx)

```bash
awk '$9 ~ /^[45]/ {print $9}' otus.log | sort | uniq -c | sort -nr
```

---

<a id="four"></a>
## üß∞ –ö–æ–º–∞–Ω–¥–∞ ‚Ññ4 - "–í—Å–µ –∫–æ–¥—ã HTTP —Å –∏—Ö –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ–º

```bash
awk '$9 ~ /^[12345]/ {print $9}' otus.log | sort | uniq -c | sort -nr
```

---

<a id="start"></a>
## üöÄ –ö—Ä–∞—Ç–∫–∏–π –ø–æ—Ä—è–¥–æ–∫ –¥–µ–π—Å—Ç–≤–∏–π (—Å–æ–∑–¥–∞–Ω–∏–µ –∏ –∑–∞–ø—É—Å–∫ —Å–∫—Ä–∏–ø—Ç–∞)

```bash
# ----------------------------- STEP 1 -----------------------------
# –°–æ–∑–¥–∞–µ–º —Ñ–∞–π–ª —Å–∫—Ä–∏–ø—Ç–∞:
touch ~/loglab/log_report.sh

# ----------------------------- STEP 2 -----------------------------
# –°–æ–∑–¥–∞–µ–º –≤—Ä–µ–º–µ–Ω–Ω—ã–π —Ñ–∞–π–ª –¥–ª—è –æ—Ç—á–µ—Ç–∞:
touch /tmp/log_report.txt

# ----------------------------- STEP 3 -----------------------------
# –î–µ–ª–∞–µ–º —Å–∫—Ä–∏–ø—Ç –∏—Å–ø–æ–ª–Ω—è–µ–º—ã–º:
chmod +x ~/loglab/log_report.sh

# ----------------------------- STEP 4 -----------------------------
# –ó–∞–ø—É—Å–∫–∞–µ–º –≤—Ä—É—á–Ω—É—é –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏:
./log_report.sh
```

---

<a id="cron"></a>
## ‚è±Ô∏è –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –≤ cron

```bash
# ----------------------------- STEP 1 -----------------------------
# –°–¥–µ–ª–∞—Ç—å —Å–∫—Ä–∏–ø—Ç –∏—Å–ø–æ–ª–Ω—è–µ–º—ã–º:
chmod +x /home/ubuntuserv/loglab/log_report.sh

# ----------------------------- STEP 2 -----------------------------
# –û—Ç–∫—Ä—ã—Ç—å cron:
crontab -e

# ----------------------------- STEP 3 -----------------------------
# –î–æ–±–∞–≤–∏—Ç—å —Å—Ç—Ä–æ–∫—É:
0 * * * * /home/ubuntuserv/loglab/log_report.sh >> /home/ubuntuserv/loglab/cron.log 2>&1
```

---

<a id="script"></a>
## üìù –°–æ–¥–µ—Ä–∂–∏–º–æ–µ —Å–∫—Ä–∏–ø—Ç–∞

```bash
awk '$9 ~ /^[45]/ {print $9}' otus.log | sort | uniq -c | sort -nr
```

---
